"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4498],{3912:(b,M,r)=>{r.d(M,{e:()=>p});var d=r(2557),f=r(1360);let p=(()=>{var l;class a{constructor(c){this.http=c,this.API="https://api.spotify.com/v1"}get headers(){const c=localStorage.getItem("access_token");if(!c)throw new Error("No Spotify access token found.");return new d.Lr({Authorization:`Bearer ${c}`})}searchTracks(c){return this.http.get(`${this.API}/search`,{headers:this.headers,params:(new d.Nl).set("q",c).set("type","track").set("limit","20")})}play(c){return this.http.put(`${this.API}/me/player/play`,{uris:[c]},{headers:this.headers})}getRandomTracks(c=20){const _=["pop","rock","hip-hop","jazz","classical","electronic","country"],m=[];for(;m.length<2;){const C=_[Math.floor(Math.random()*_.length)];m.includes(C)||m.push(C)}const O=(new d.Nl).set("seed_genres",m.join(",")).set("limit",c.toString());return this.http.get(`${this.API}/recommendations`,{headers:this.headers,params:O})}getTrack(c){return this.http.get(`${this.API}/tracks/${c}`,{headers:this.headers})}}return(l=a).\u0275fac=function(c){return new(c||l)(f.KVO(d.Qq))},l.\u0275prov=f.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),a})()},4498:(b,M,r)=>{r.r(M),r.d(M,{FolderDetailPageModule:()=>z});var d=r(2881),f=r(4341),p=r(3092),l=r(5207),a=r(467),e=r(1360),c=r(5367),_=r(6570),m=r(7291);const O="library-items";let C=(()=>{var o;class s{constructor(n){this.store=n,this.items=[],this.load()}load(){var n=this;return(0,a.A)(function*(){const t=yield n.store.get(O);n.items=t||[]})()}save(){this.store.set(O,this.items)}getAll(){var n=this;return(0,a.A)(function*(){return yield n.load(),[...n.items]})()}add(n){var t=this;return(0,a.A)(function*(){t.items.find(i=>i.id===n.id)||(t.items.push(n),t.save())})()}remove(n){var t=this;return(0,a.A)(function*(){t.items=t.items.filter(i=>i.id!==n),t.save()})()}}return(o=s).\u0275fac=function(n){return new(n||o)(e.KVO(m.n))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),s})();var u=r(4970),x=r(3912);function y(o,s){if(1&o){const g=e.RV6();e.j41(0,"ion-item",1)(1,"ion-button",2),e.bIt("click",function(){const t=e.eBV(g).$implicit,i=e.XpG();return e.Njj(i.play(t))}),e.nrm(2,"ion-icon",3),e.k0s(),e.j41(3,"ion-button",4),e.bIt("click",function(){const t=e.eBV(g).$implicit,i=e.XpG();return e.Njj(i.remove(t))}),e.nrm(4,"ion-icon",5),e.k0s()()}}const v=[{path:"",component:(()=>{var o;class s{constructor(n,t,i,P,h){this.route=n,this.folderSvc=t,this.libSvc=i,this.playback=P,this.spotify=h,this.items=[],this.searchQuery="",this.searchResults=[]}ngOnInit(){var n=this;return(0,a.A)(function*(){const t=n.route.snapshot.paramMap.get("id"),i=yield n.folderSvc.getAll();n.folder=i.find(P=>P.id===t),yield n.loadItems()})()}loadItems(){var n=this;return(0,a.A)(function*(){const t=yield n.libSvc.getAll();n.items=t.filter(i=>n.folder.itemIds.includes(i.id))})()}searchMusic(){var n=this;return(0,a.A)(function*(){const t=n.searchQuery.trim();if(!t)return void(n.searchResults=[]);const i=yield n.spotify.searchTracks(t).toPromise();n.searchResults=i.tracks.items})()}addTrack(n){var t=this;return(0,a.A)(function*(){var i;const P={id:n.id,type:"spotify",name:n.name,artists:n.artists.map(h=>h.name),uri:n.uri,thumbnail:null===(i=n.album.images[0])||void 0===i?void 0:i.url};yield t.libSvc.add(P),yield t.folderSvc.addItem(t.folder.id,P.id),yield t.loadItems()})()}play(n){this.playback.play(n)}remove(n){var t=this;return(0,a.A)(function*(){yield t.folderSvc.removeItem(t.folder.id,n.id),yield t.loadItems()})()}formatTime(n){return`${Math.floor(n/60)}:${String(Math.floor(n%60)).padStart(2,"0")}`}}return(o=s).\u0275fac=function(n){return new(n||o)(e.rXU(c.nX),e.rXU(_.k),e.rXU(C),e.rXU(u.z),e.rXU(x.e))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-folder-detail"]],standalone:!1,decls:1,vars:1,consts:[["class","card-item",4,"ngFor","ngForOf"],[1,"card-item"],["slot","end","fill","clear",3,"click"],["name","play"],["slot","end","color","danger","fill","clear",3,"click"],["name","trash"]],template:function(n,t){1&n&&e.DNE(0,y,5,0,"ion-item",0),2&n&&e.Y8G("ngForOf",t.items)},dependencies:[d.Sq,p.Jm,p.iq,p.uz],styles:[".folder-detail-header[_ngcontent-%COMP%]{--background: #121212;--border-color: #333333}.folder-detail-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #121212;--color: #ffffff;--border-color: #333333}.folder-detail-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=start][_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]{--color: #ffffff;--icon-font-size: 1.5rem}.folder-detail-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-buttons[slot=start][_ngcontent-%COMP%]   ion-back-button[_ngcontent-%COMP%]:hover{--color: #1db954}.folder-detail-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:1.4rem;text-align:center}.folder-detail-content[_ngcontent-%COMP%]{--background: #121212;--color: #ffffff;padding:16px 0}.section[_ngcontent-%COMP%]{margin-bottom:32px;padding:0 16px}.section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #333333}.section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:12px}.section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:1.1rem;margin:0;letter-spacing:.02em}.section[_ngcontent-%COMP%]   .section-body[_ngcontent-%COMP%]{padding-top:8px}.import-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{color:#ff5722}.import-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: transparent;--background-hover: #282828;--border-color: #ff5722;--color: #ff5722;--color-hover: rgb(255, 125.7692307692, 85);--border-radius: 12px;--padding-top: 16px;--padding-bottom: 16px;margin:8px 0;font-weight:600}.import-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:1.2rem}.import-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #ff572233}.spotify-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{color:#1db954}.spotify-section[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]{--background: #181818;--color: #ffffff;--placeholder-color: #535353;--icon-color: #b3b3b3;--clear-button-color: #b3b3b3;--border-radius: 25px;margin:8px 0 16px;border:1px solid #333333;border-radius:25px}.spotify-section[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]:focus-within{border-color:#1db954;box-shadow:0 0 0 2px #1db95433}.spotify-section[_ngcontent-%COMP%]   .custom-searchbar[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{padding:0 20px;font-size:1rem}.contents-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{color:#9c27b0}.card-list[_ngcontent-%COMP%]{background:transparent;padding:0}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]{--background: #181818;--color: #ffffff;--border-color: transparent;--inner-border-width: 0;--padding-start: 16px;--padding-end: 12px;--min-height: 72px;margin:8px 0;border-radius:12px;box-shadow:0 2px 8px #0000004d}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]:hover{--background: #282828;transform:translateY(-1px);box-shadow:0 4px 16px #0006}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:6px;overflow:hidden;margin-right:4px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:12px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff;font-weight:600;font-size:1rem;margin:0 0 4px;line-height:1.3}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#b3b3b3;font-size:.875rem;margin:0;line-height:1.2}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: 50%;--padding-start: 10px;--padding-end: 10px;width:44px;height:44px;margin-left:8px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:first-of-type{--color: #1db954;--color-hover: #1ed760}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:first-of-type:hover{--color: #1ed760;transform:scale(1.05)}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]{--color: #e22856;--color-hover: #ff4081}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[color=danger][_ngcontent-%COMP%]:hover{--color: #ff4081;transform:scale(1.05)}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:40px 20px;color:#b3b3b3}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:#535353;margin-bottom:12px;opacity:.6}.empty-state[_ngcontent-%COMP%]:not(.empty-icon){font-size:1rem;margin:0}.mini-player-footer[_ngcontent-%COMP%]{--background: #181818;--border-color: #333333}.mini-player-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #181818;--color: #ffffff;--border-color: #333333;padding:8px 0;border-top:1px solid #333333}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px 8px}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: #1db954;--color-hover: #1ed760;--border-radius: 50%;--padding-start: 12px;--padding-end: 12px;width:48px;height:48px;margin-right:16px}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:hover{--color: #1ed760;transform:scale(1.05)}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]{flex:1}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#fff;font-weight:600;font-size:.95rem;line-height:1.2;margin-bottom:2px}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#b3b3b3;font-size:.8rem;line-height:1.2}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]{padding:0 16px 8px}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]{--bar-background: #333333;--bar-background-active: #1db954;--knob-background: #1db954;--knob-size: 16px;--height: 4px;padding:0}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]::part(bar){border-radius:2px}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]::part(bar-active){border-radius:2px}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]::part(knob){box-shadow:0 2px 8px #1db95466}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]   ion-range[_ngcontent-%COMP%]::part(knob):hover{transform:scale(1.2)}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#535353;font-size:.75rem;font-weight:500}@media (max-width: 480px){.folder-detail-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-size:1.2rem}.section[_ngcontent-%COMP%]{padding:0 12px;margin-bottom:24px}.section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{margin-bottom:12px}.section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-icon[_ngcontent-%COMP%]{font-size:1.3rem;margin-right:10px}.section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem}.import-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-top: 14px;--padding-bottom: 14px}.import-section[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 8px;--min-height: 64px;margin:6px 0;border-radius:10px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:4px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:10px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:40px;height:40px;margin-left:6px;--padding-start: 8px;--padding-end: 8px}.card-list[_ngcontent-%COMP%]   .card-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem}.empty-state[_ngcontent-%COMP%]{padding:30px 16px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]{padding:0 12px 6px}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:44px;height:44px;margin-right:12px}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.4rem}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem}.mini-player-footer[_ngcontent-%COMP%]   .mini-player[_ngcontent-%COMP%]   .track-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.75rem}.mini-player-footer[_ngcontent-%COMP%]   .seek-bar[_ngcontent-%COMP%]{padding:0 12px 6px}}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:40px 20px;color:#b3b3b3}.loading-state[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: #1db954;margin-right:12px}.loading-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;font-weight:500}[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#121212}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#333;border-radius:3px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#535353}.card-item[_ngcontent-%COMP%]:focus-visible, ion-button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #1db954;outline-offset:2px}"]}),s})()}];let k=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[l.iI.forChild(v),l.iI]}),s})(),z=(()=>{var o;class s{}return(o=s).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.MD,f.YN,p.bv,k]}),s})()}}]);